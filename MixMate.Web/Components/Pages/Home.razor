@page "/"
@using MixMate.Core.Entities
@rendermode InteractiveServer

<PageTitle>Mix Mate</PageTitle>

<h1>Mix Mate</h1>

<InputFile OnChange="@LoadFiles" class="form-control p-1 m-1" multiple accept=".txt" />

@if (Errors.Count > 0)
{
    <h2>Error</h2>
    <ul class="=text-danger">
        @foreach (var error in Errors)
        {
            <li>@error</li>
        }
    </ul>
}

<MudPopoverProvider /> @* For whatever reason this wasn't being picked up properly in MainLayout.razor so its here instead *@
<MudDataGrid Items="Songs" T="Song" SelectOnRowClick="true" MultiSelection="false" @bind-SelectedItems="selectedSongs">
    <Columns>
        <SelectColumn T="Song" />
        <PropertyColumn Property="song => song.Title" />
        <PropertyColumn Property="song => song.Artist" />
        <PropertyColumn Property="song => song.Album" />
        <PropertyColumn Property="song => song.Genre" />
        <PropertyColumn Property="song => song.Bpm" />
        <PropertyColumn Property="song => song.Duration" />
        <PropertyColumn Property="song => song.Key.GetFullKey()" />
    </Columns>
</MudDataGrid>

@code 
{
    HashSet<Song> selectedSongs = new();
}
